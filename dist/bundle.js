(()=>{var e={637:(e,t,a)=>{const{Game:o}=a(207),{State:n,Situation:r}=a(75);RoomParams={roomName:"Private Room",maxPlayers:40,public:!1,noPlayer:!0,token:"Aca iria el token de la sala",timeLimit:3,scoreLimit:3,teamsLock:!1};var i={roomName:RoomParams.roomName,maxPlayers:RoomParams.maxPlayers,public:RoomParams.public,noPlayer:RoomParams.noPlayer};"string"==typeof token&&39==token.length&&(i.token=token);const l=HBInit(i);a.g.lastTouches=Array(2).fill(null),a.g.roomPassword="",a.g.players=[],a.g.teamRed=[],a.g.teamBlue=[],a.g.teamSpec=[],a.g.gameState=n.STOP,a.g.playSituation=r.STOP,a.g.goldenGoal=!1,a.g.possession=[0,0],a.g.actionZoneHalf=[0,0],a.g.lastTeamTouched,a.g.banList=[],a.g.authArray=[],a.g.adminList=[],a.g.masterList=[],l.setScoreLimit(RoomParams.scoreLimit),l.setTimeLimit(RoomParams.timeLimit),l.setTeamsLock(RoomParams.teamsLock),l.setKickRateLimit(6,0,0);let s=new o(l);e.exports={room:l,game:s}},220:(e,t,a)=>{const{getGoalGame:o,checkGoalKickTouch:n}=a(956),{Game:r,BallTouch:i}=a(207),{commands:l,getCommand:s}=a(630),{stadiumCommand:m}=a(640),{getPlayerComp:d,teamChat:c,playerChat:u}=a(237),{checkTime:g,endGame:h,handleLineupChangeLeave:f,handleLineupChangeTeamChange:p}=a(403),{updateTeams:y,updateAdmins:C,getRole:A,ghostKickHandle:b,handleActivityPlayerTeamChange:T,handleActivityStop:v,handleActivity:P}=a(565),{getGameStats:x,getGoalString:S,getBallSpeed:k,getLastTouchOfTheBall:E}=a(675);let{Team:w,State:L,Role:M,HaxNotification:O,Situation:N}=a(75);const R=a(871);let{room:G,game:B}=a(637);var $,H,I;m({id:0},"!big"),"function"!=typeof String.prototype.replaceAll&&(String.prototype.replaceAll=function(e,t){return this.split(e).join(t)}),G.onPlayerJoin=function(e){if(a.g.authArray[e.id]=[e.auth,e.conn],G.sendAnnouncement(`👋 Welcome ${e.name} !\nEnter "t" before your message to use team chat and "@@" followed by a player name to PM him !`,e.id,R.welcomeColor,"bold",O.CHAT),y(),C(),-1!=a.g.masterList.findIndex((t=>t==e.auth))?(G.sendAnnouncement(`Master ${e.name} has connected to the room !`,null,R.announcementColor,"bold",O.CHAT),G.setPlayerAdmin(e.id,!0)):-1!=a.g.adminList.map((e=>e[0])).findIndex((t=>t==e.auth))&&(G.sendAnnouncement(`Admin ${e.name} has connected to the room !`,null,R.announcementColor,"bold",O.CHAT),G.setPlayerAdmin(e.id,!0)),a.g.players.filter((t=>t.id!=e.id&&a.g.authArray[t.id][0]==e.auth)).length>0){var t=a.g.players.filter((t=>t.id!=e.id&&a.g.authArray[t.id][0]==e.auth));for(let a of t)b(a,e)}},G.onPlayerTeamChange=function(e,t){p(e),y(),T(e)},G.onPlayerLeave=function(e){f(e),y(),C()},G.onPlayerKicked=function(e,t,a,o){return kickFetchVariable=!0,a&&(null!=o&&(o.id==e.id||A(o)<M.MASTER)||(A(e),M.MASTER)),void G.clearBan(e.id)},G.onPlayerChat=function(e,t){let a=t.split(/ +/);if("!"==a[0][0]){let o=s(a[0].slice(1).toLowerCase());return 0!=o&&l[o].roles<=A(e)?l[o].function(e,t):G.sendAnnouncement("The command you tried to enter does not exist for you. Please enter '!help' to get the available commands to you.",e.id,R.errorColor,"bold",O.CHAT),!1}return"t"==a[0].toLowerCase()?(c(e,t),!1):"@@"===a[0].substring(0,2)?(u(e,t),!1):void 0},G.onPlayerActivity=function(e){if(a.g.gameState!==L.STOP){let t=d(e);null!=t&&(t.inactivityTicks=0)}},G.onPlayerBallKick=function(e){if(a.g.playSituation!=N.GOAL){var t=G.getBallPosition();0!=B.touchArray.length&&e.id==B.touchArray[B.touchArray.length-1].player.id||(a.g.playSituation==N.KICKOFF&&(a.g.playSituation=N.PLAY),lastTeamTouched=e.team,B.touchArray.push(new i(e,B.scores.time,o(B),t)),a.g.lastTouches[0]=n(B.touchArray,B.touchArray.length-1,o(B)),a.g.lastTouches[1]=n(B.touchArray,B.touchArray.length-2,o(B))),console.log(a.g.lastTouches)}},G.onGameStart=function(e){clearTimeout(H),null!=e&&clearTimeout(H),B=new r(G),possession=[0,0],actionZoneHalf=[0,0],a.g.gameState=L.PLAY,endGameVariable=!1,a.g.goldenGoal=!1,a.g.playSituation=N.KICKOFF,a.g.lastTouches=Array(2).fill(null),lastTeamTouched=w.SPECTATORS},G.onGameStop=function(e){clearTimeout($),clearTimeout(I),null!=e&&clearTimeout(H),cancelGameVariable=!1,a.g.gameState=L.STOP,a.g.playSituation=N.STOP,y(),v()},G.onGamePause=function(e){a.g.gameState==L.PAUSE&&(null!=e?G.sendAnnouncement(`Game paused by ${e.name} !`,null,R.defaultColor,"bold",O.NONE):G.sendAnnouncement("Game paused !",null,R.defaultColor,"bold",O.NONE)),clearTimeout(I),a.g.gameState=L.PAUSE},G.onGameUnpause=function(e){I=setTimeout((()=>{a.g.gameState=L.PLAY}),2e3),null!=e?G.sendAnnouncement(`Game unpaused by ${e.name} !`,null,R.defaultColor,"bold",O.NONE):G.sendAnnouncement("Game unpaused !",null,R.defaultColor,"bold",O.NONE)},G.onTeamGoal=function(e){const t=G.getScores();B.scores=t,a.g.playSituation=N.GOAL,ballSpeed=k();var o=S(e);G.sendAnnouncement(o,null,e==w.RED?R.redColor:R.blueColor,null,O.CHAT),(0!=t.scoreLimit&&(t.red==t.scoreLimit||t.blue==t.scoreLimit)||a.g.goldenGoal)&&(h(e),a.g.goldenGoal=!1,$=setTimeout((()=>{G.stopGame()}),1e3))},G.onPositionsReset=function(){a.g.lastTouches=Array(2).fill(null),lastTeamTouched=w.SPECTATORS,a.g.playSituation=N.KICKOFF},G.onPlayerAdminChange=function(e,t){y(),!e.admin&&A(e)>=M.ADMIN_TEMP?G.setPlayerAdmin(e.id,!0):C(null==t||e.admin||e.id!=t.id?0:e.id)},G.onKickRateLimitSet=function(e,t,a,o){null!=o&&(G.sendAnnouncement('It is not allowed to change the kickrate limit. It must stay at "6-0-0".',player.id,R.errorColor,"bold",O.CHAT),G.setKickRateLimit(6,0,0))},G.onStadiumChange=function(e,t){},G.onGameTick=function(){g(),E(),x(),P()}},871:e=>{e.exports={welcomeColor:12984037,announcementColor:16773110,infoColor:12435071,privateMessageColor:16757971,redColor:16728140,blueColor:6488319,warningColor:16750837,errorColor:10752e3,successColor:7799805,defaultColor:null}},207:(e,t,a)=>{class o{constructor(e,t,a,o){this.player=e,this.auth=t,this.timeEntry=a,this.timeExit=o,this.inactivityTicks=0,this.GKTicks=0}}e.exports={Goal:class{constructor(e,t,a,o){this.time=e,this.team=t,this.striker=a,this.assist=o}},Game:class{constructor(e){this.date=Date.now(),this.scores=e.getScores(),this.playerComp=function(){var e=[[],[]];for(let t of a.g.teamRed)e[0].push(new o(t,a.g.authArray[t.id][0],[0],[]));for(let t of a.g.teamBlue)e[1].push(new o(t,a.g.authArray[t.id][0],[0],[]));return e}(),this.goals=[],this.rec=e.startRecording(),this.touchArray=[]}},PlayerComposition:o,BallTouch:class{constructor(e,t,a,o){this.player=e,this.time=t,this.goal=a,this.position=o}}}},630:(e,t,a)=>{const{room:o}=a(637),{clearbansCommand:n,banListCommand:r,adminListCommand:i,setAdminCommand:l,removeAdminCommand:s,passwordCommand:m}=a(858),{restartCommand:d,restartSwapCommand:c,swapCommand:u,stadiumCommand:g}=a(640),{masterCommand:h}=a(314),{getRole:f}=a(565),p=a(871);let{Role:y,HaxNotification:C}=a(75);function A(e){if(b.hasOwnProperty(e))return e;for(const[t,a]of Object.entries(b))for(let o of a.aliases)if(o==e)return t;return!1}const b={help:{aliases:["commands"],roles:y.PLAYER,desc:"\n\tThis command shows all the available commands. It also can show the description of a command in particular.\nExample: '!help bb' will show the description of the 'bb' command.",function:function(e,t){var a=t.split(/ +/).slice(1);if(0==a.length){var n="Player commands :";for(const[e,t]of Object.entries(b))t.desc&&t.roles==y.PLAYER&&(n+=` !${e},`);if(n=n.substring(0,n.length-1)+".\n",f(e)>=y.ADMIN_TEMP){n+="Admin commands :";for(const[e,t]of Object.entries(b))t.desc&&t.roles==y.ADMIN_TEMP&&(n+=` !${e},`);":"==n.slice(n.length-1)&&(n+=" None,"),n=n.substring(0,n.length-1)+".\n"}if(f(e)>=y.MASTER){n+="Master commands :";for(const[e,t]of Object.entries(b))t.desc&&t.roles==y.MASTER&&(n+=` !${e},`);":"==n.slice(n.length-1)&&(n+=" None,"),n=n.substring(0,n.length-1)+".\n"}n+="\nTo get information on a specific command, type ''!help <command name>'.",o.sendAnnouncement(n,e.id,p.infoColor,"bold",C.CHAT)}else if(a.length>=1){var r=A(a[0].toLowerCase());0!=r&&0!=b[r].desc?o.sendAnnouncement(`'${r}' command :\n${b[r].desc}`,e.id,p.infoColor,"bold",C.CHAT):o.sendAnnouncement("The command you tried to get information on does not exist. To check all available commands, type '!help'",e.id,p.errorColor,"bold",C.CHAT)}}},claim:{aliases:[],roles:y.PLAYER,desc:!1,function:h},rr:{aliases:[],roles:y.ADMIN_TEMP,desc:"\n    This command restarts the game.",function:d},rrs:{aliases:[],roles:y.ADMIN_TEMP,desc:"\n    This command swaps the teams and restarts the game.",function:c},swap:{aliases:["s"],roles:y.ADMIN_TEMP,desc:"\n    This command swaps the teams when the game is stopped.",function:u},training:{aliases:[],roles:y.ADMIN_TEMP,desc:"\n        This command loads the classic training stadium.",function:g},classic:{aliases:[],roles:y.ADMIN_TEMP,desc:"\n        This command loads the classic stadium.",function:g},big:{aliases:[],roles:y.ADMIN_TEMP,desc:"\n        This command loads the big stadium.",function:g},clearbans:{aliases:[],roles:y.MASTER,desc:"\n\tThis command unbans everyone. It also can unban one player in particular, by adding his ID as an argument.",function:n},bans:{aliases:["banlist"],roles:y.MASTER,desc:"\n    This command shows all the players that were banned and their IDs.",function:r},admins:{aliases:["adminlist"],roles:y.MASTER,desc:"\n    This command shows all the players that are permanent admins.",function:i},setadmin:{aliases:["admin"],roles:y.MASTER,desc:"\n    This command allows to set someone as admin. He will be able to connect as admin, and can be removed at any time by masters.\nIt takes 1 argument:\nArgument 1: #<id> where <id> is the id of the player targeted.\nExample: !setadmin #3 will give admin to the player with id 3.",function:l},removeadmin:{aliases:["unadmin"],roles:y.MASTER,desc:"\n\tThis command allows to remove someone as admin.\nIt takes 1 argument:\nArgument 1: #<id> where <id> is the id of the player targeted.\nOR\nArgument 1: <number> where <number> is the number associated with the admin given by the 'adminList' command.\nExample: !removeadmin #300 will remove admin to the player with id 300,\n         !removeadmin 2 will remove the admin n°2 according to the 'adminList' command.",function:s},password:{aliases:["pw"],roles:y.MASTER,desc:"\n        This command allows to add a password to the room.\n    It takes 1 argument:\n    Argument 1: <password> where <password> is the password you want for the room.\n    \n    To remove the room password, simply enter '!password'.",function:m}};e.exports={commands:b,getCommand:A}},640:(e,t,a)=>{const{room:o}=a(637),n='{"name":"Classic","width":420,"height":200,"spawnDistance":170,"bg":{"type":"grass","width":370,"height":170,"kickOffRadius":75,"cornerRadius":0},"vertexes":[{"x":-370,"y":170,"trait":"ballArea"},{"x":-370,"y":64,"trait":"ballArea"},{"x":-370,"y":-64,"trait":"ballArea"},{"x":-370,"y":-170,"trait":"ballArea"},{"x":370,"y":170,"trait":"ballArea"},{"x":370,"y":64,"trait":"ballArea"},{"x":370,"y":-64,"trait":"ballArea"},{"x":370,"y":-170,"trait":"ballArea"},{"x":0,"y":200,"trait":"kickOffBarrier"},{"x":0,"y":75,"trait":"kickOffBarrier"},{"x":0,"y":-75,"trait":"kickOffBarrier"},{"x":0,"y":-200,"trait":"kickOffBarrier"},{"x":-380,"y":-64,"trait":"goalNet"},{"x":-400,"y":-44,"trait":"goalNet"},{"x":-400,"y":44,"trait":"goalNet"},{"x":-380,"y":64,"trait":"goalNet"},{"x":380,"y":-64,"trait":"goalNet"},{"x":400,"y":-44,"trait":"goalNet"},{"x":400,"y":44,"trait":"goalNet"},{"x":380,"y":64,"trait":"goalNet"}],"segments":[{"v0":0,"v1":1,"trait":"ballArea"},{"v0":2,"v1":3,"trait":"ballArea"},{"v0":4,"v1":5,"trait":"ballArea"},{"v0":6,"v1":7,"trait":"ballArea"},{"v0":12,"v1":13,"trait":"goalNet","curve":-90},{"v0":13,"v1":14,"trait":"goalNet"},{"v0":14,"v1":15,"trait":"goalNet","curve":-90},{"v0":16,"v1":17,"trait":"goalNet","curve":90},{"v0":17,"v1":18,"trait":"goalNet"},{"v0":18,"v1":19,"trait":"goalNet","curve":90},{"v0":8,"v1":9,"trait":"kickOffBarrier"},{"v0":9,"v1":10,"trait":"kickOffBarrier","curve":180,"cGroup":["blueKO"]},{"v0":9,"v1":10,"trait":"kickOffBarrier","curve":-180,"cGroup":["redKO"]},{"v0":10,"v1":11,"trait":"kickOffBarrier"}],"goals":[{"p0":[-370,64],"p1":[-370,-64],"team":"red"},{"p0":[370,64],"p1":[370,-64],"team":"blue"}],"discs":[{"pos":[-370,64],"trait":"goalPost","color":"FFCCCC"},{"pos":[-370,-64],"trait":"goalPost","color":"FFCCCC"},{"pos":[370,64],"trait":"goalPost","color":"CCCCFF"},{"pos":[370,-64],"trait":"goalPost","color":"CCCCFF"}],"planes":[{"normal":[0,1],"dist":-170,"trait":"ballArea"},{"normal":[0,-1],"dist":-170,"trait":"ballArea"},{"normal":[0,1],"dist":-200,"bCoef":0.1},{"normal":[0,-1],"dist":-200,"bCoef":0.1},{"normal":[1,0],"dist":-420,"bCoef":0.1},{"normal":[-1,0],"dist":-420,"bCoef":0.1}],"traits":{"ballArea":{"vis":false,"bCoef":1,"cMask":["ball"]},"goalPost":{"radius":8,"invMass":0,"bCoef":0.5},"goalNet":{"vis":true,"bCoef":0.1,"cMask":["ball"]},"kickOffBarrier":{"vis":false,"bCoef":0.1,"cGroup":["redKO","blueKO"],"cMask":["red","blue"]}}}',r='{"name":"Big","width":600,"height":270,"spawnDistance":350,"bg":{"type":"grass","width":550,"height":240,"kickOffRadius":80,"cornerRadius":0},"vertexes":[{"x":-550,"y":240,"trait":"ballArea"},{"x":-550,"y":80,"trait":"ballArea"},{"x":-550,"y":-80,"trait":"ballArea"},{"x":-550,"y":-240,"trait":"ballArea"},{"x":550,"y":240,"trait":"ballArea"},{"x":550,"y":80,"trait":"ballArea"},{"x":550,"y":-80,"trait":"ballArea"},{"x":550,"y":-240,"trait":"ballArea"},{"x":0,"y":270,"trait":"kickOffBarrier"},{"x":0,"y":80,"trait":"kickOffBarrier"},{"x":0,"y":-80,"trait":"kickOffBarrier"},{"x":0,"y":-270,"trait":"kickOffBarrier"},{"x":-560,"y":-80,"trait":"goalNet"},{"x":-580,"y":-60,"trait":"goalNet"},{"x":-580,"y":60,"trait":"goalNet"},{"x":-560,"y":80,"trait":"goalNet"},{"x":560,"y":-80,"trait":"goalNet"},{"x":580,"y":-60,"trait":"goalNet"},{"x":580,"y":60,"trait":"goalNet"},{"x":560,"y":80,"trait":"goalNet"}],"segments":[{"v0":0,"v1":1,"trait":"ballArea"},{"v0":2,"v1":3,"trait":"ballArea"},{"v0":4,"v1":5,"trait":"ballArea"},{"v0":6,"v1":7,"trait":"ballArea"},{"v0":12,"v1":13,"trait":"goalNet","curve":-90},{"v0":13,"v1":14,"trait":"goalNet"},{"v0":14,"v1":15,"trait":"goalNet","curve":-90},{"v0":16,"v1":17,"trait":"goalNet","curve":90},{"v0":17,"v1":18,"trait":"goalNet"},{"v0":18,"v1":19,"trait":"goalNet","curve":90},{"v0":8,"v1":9,"trait":"kickOffBarrier"},{"v0":9,"v1":10,"trait":"kickOffBarrier","curve":180,"cGroup":["blueKO"]},{"v0":9,"v1":10,"trait":"kickOffBarrier","curve":-180,"cGroup":["redKO"]},{"v0":10,"v1":11,"trait":"kickOffBarrier"}],"goals":[{"p0":[-550,80],"p1":[-550,-80],"team":"red"},{"p0":[550,80],"p1":[550,-80],"team":"blue"}],"discs":[{"pos":[-550,80],"trait":"goalPost","color":"FFCCCC"},{"pos":[-550,-80],"trait":"goalPost","color":"FFCCCC"},{"pos":[550,80],"trait":"goalPost","color":"CCCCFF"},{"pos":[550,-80],"trait":"goalPost","color":"CCCCFF"}],"planes":[{"normal":[0,1],"dist":-240,"trait":"ballArea"},{"normal":[0,-1],"dist":-240,"trait":"ballArea"},{"normal":[0,1],"dist":-270,"bCoef":0.1},{"normal":[0,-1],"dist":-270,"bCoef":0.1},{"normal":[1,0],"dist":-600,"bCoef":0.1},{"normal":[-1,0],"dist":-600,"bCoef":0.1}],"traits":{"ballArea":{"vis":false,"bCoef":1,"cMask":["ball"]},"goalPost":{"radius":8,"invMass":0,"bCoef":0.5},"goalNet":{"vis":true,"bCoef":0.1,"cMask":["ball"]},"kickOffBarrier":{"vis":false,"bCoef":0.1,"cGroup":["redKO","blueKO"],"cMask":["red","blue"]}}}',i=a(871),{instantRestart:l}=a(403);let{Situation:s,HaxNotification:m}=a(75);function d(){for(let e of a.g.teamBlue)o.setPlayerTeam(e.id,Team.RED);for(let e of a.g.teamRed)o.setPlayerTeam(e.id,Team.BLUE)}e.exports={restartCommand:function(e,t){l()},restartSwapCommand:function(e,t){o.stopGame(),d(),startTimeout=setTimeout((()=>{o.startGame()}),10)},swapCommand:function(e,t){a.g.playSituation==s.STOP?(d(),o.sendAnnouncement("✔️ Teams swapped !",null,i.announcementColor,"bold",null)):o.sendAnnouncement("Please stop the game before swapping.",e.id,i.errorColor,"bold",m.CHAT)},stadiumCommand:function(e,t){var a=t.split(/ +/);["!classic"].includes(a[0].toLowerCase())?(o.stopGame(),"Classic"==JSON.parse(n).name?o.setDefaultStadium("Classic"):o.setCustomStadium(n)):["!big"].includes(a[0].toLowerCase())?(o.stopGame(),"Big"==JSON.parse(r).name?o.setDefaultStadium("Big"):o.setCustomStadium(r)):["!training"].includes(a[0].toLowerCase())?(o.stopGame(),o.setCustomStadium('{"name":"Classic Training","width":420,"height":200,"spawnDistance":170,"bg":{"type":"grass","width":370,"height":170,"kickOffRadius":75,"cornerRadius":0},"vertexes":[{"x":-370,"y":170,"trait":"ballArea"},{"x":-370,"y":64,"trait":"ballArea"},{"x":-370,"y":-64,"trait":"ballArea"},{"x":-370,"y":-170,"trait":"ballArea"},{"x":370,"y":170,"trait":"ballArea"},{"x":370,"y":64,"trait":"ballArea"},{"x":370,"y":-64,"trait":"ballArea"},{"x":370,"y":-170,"trait":"ballArea"},{"x":0,"y":200,"trait":"kickOffBarrier"},{"x":0,"y":75,"trait":"kickOffBarrier"},{"x":0,"y":-75,"trait":"kickOffBarrier"},{"x":0,"y":-200,"trait":"kickOffBarrier"},{"x":-380,"y":-64,"trait":"goalNet"},{"x":-400,"y":-44,"trait":"goalNet"},{"x":-400,"y":44,"trait":"goalNet"},{"x":-380,"y":64,"trait":"goalNet"},{"x":380,"y":-64,"trait":"goalNet"},{"x":400,"y":-44,"trait":"goalNet"},{"x":400,"y":44,"trait":"goalNet"},{"x":380,"y":64,"trait":"goalNet"}],"segments":[{"v0":0,"v1":1,"trait":"ballArea"},{"v0":2,"v1":3,"trait":"ballArea"},{"v0":4,"v1":5,"trait":"ballArea"},{"v0":6,"v1":7,"trait":"ballArea"},{"v0":12,"v1":13,"trait":"goalNet","curve":-90},{"v0":13,"v1":14,"trait":"goalNet"},{"v0":14,"v1":15,"trait":"goalNet","curve":-90},{"v0":16,"v1":17,"trait":"goalNet","curve":90},{"v0":17,"v1":18,"trait":"goalNet"},{"v0":18,"v1":19,"trait":"goalNet","curve":90},{"v0":8,"v1":9,"trait":"kickOffBarrier"},{"v0":9,"v1":10,"trait":"kickOffBarrier","curve":180,"cGroup":["blueKO"]},{"v0":9,"v1":10,"trait":"kickOffBarrier","curve":-180,"cGroup":["redKO"]},{"v0":10,"v1":11,"trait":"kickOffBarrier"}],"goals":[],"discs":[{"pos":[-370,64],"trait":"goalPost","color":"FFCCCC"},{"pos":[-370,-64],"trait":"goalPost","color":"FFCCCC"},{"pos":[370,64],"trait":"goalPost","color":"CCCCFF"},{"pos":[370,-64],"trait":"goalPost","color":"CCCCFF"}],"planes":[{"normal":[0,1],"dist":-170,"trait":"ballArea"},{"normal":[0,-1],"dist":-170,"trait":"ballArea"},{"normal":[0,1],"dist":-200,"bCoef":0.1},{"normal":[0,-1],"dist":-200,"bCoef":0.1},{"normal":[1,0],"dist":-420,"bCoef":0.1},{"normal":[-1,0],"dist":-420,"bCoef":0.1}],"traits":{"ballArea":{"vis":false,"bCoef":1,"cMask":["ball"]},"goalPost":{"radius":8,"invMass":0,"bCoef":0.5},"goalNet":{"vis":true,"bCoef":0.1,"cMask":["ball"]},"kickOffBarrier":{"vis":false,"bCoef":0.1,"cGroup":["redKO","blueKO"],"cMask":["red","blue"]}}}')):o.sendAnnouncement("Stadium not recognized.",e.id,i.errorColor,"bold",m.CHAT)}}},858:(e,t,a)=>{const{room:o}=a(637);let{HaxNotification:n}=a(75);const r=a(871);e.exports={clearbansCommand:function(e,t){var i=t.split(/ +/).slice(1);if(0==i.length)o.clearBans(),o.sendAnnouncement("✔️ Bans cleared !",null,r.announcementColor,"bold",null),a.g.banList=[];else if(1==i.length)if(parseInt(i[0])>0){var l=parseInt(i[0]);o.clearBan(l),a.g.banList.length!=a.g.banList.filter((e=>e[1]!=l)).length?o.sendAnnouncement(`✔️ ${a.g.banList.filter((e=>e[1]==l))[0][0]} has been unbanned from the room !`,null,r.announcementColor,"bold",null):o.sendAnnouncement('The ID you entered doesn\'t have a ban associated to. Enter "!help clearbans" for more information.',e.id,r.errorColor,"bold",n.CHAT),a.g.banList=a.g.banList.filter((e=>e[1]!=l))}else o.sendAnnouncement('Invalid ID entered. Enter "!help clearbans" for more information.',e.id,r.errorColor,"bold",n.CHAT);else o.sendAnnouncement('Wrong number of arguments. Enter "!help clearbans" for more information.',e.id,r.errorColor,"bold",n.CHAT)},banListCommand:function(e,t){if(0==a.g.banList.length)return o.sendAnnouncement("📢 There's nobody in the ban list.",e.id,r.announcementColor,"bold",null),!1;var n="📢 Ban list : ";for(let e of a.g.banList)n+=e[0]+`[${e[1]}], `;n=n.substring(0,n.length-2)+".",o.sendAnnouncement(n,e.id,r.announcementColor,"bold",null)},adminListCommand:function(e,t){if(0==a.g.adminList.length)return o.sendAnnouncement("📢 There's nobody in the admin list.",e.id,r.announcementColor,"bold",null),!1;var n="📢 Admin list : ";for(let e=0;e<a.g.adminList.length;e++)n+=a.g.adminList[e][1]+`[${e}], `;n=n.substring(0,n.length-2)+".",o.sendAnnouncement(n,e.id,r.announcementColor,"bold",null)},setAdminCommand:function(e,t){var i=t.split(/ +/).slice(1);if(i.length>0)if(i[0].length>0&&"#"==i[0][0])if(i[0]=i[0].substring(1,i[0].length),null!=o.getPlayer(parseInt(i[0]))){var l=o.getPlayer(parseInt(i[0]));a.g.adminList.map((e=>e[0])).includes(a.g.authArray[l.id][0])?o.sendAnnouncement("This player is a permanent admin already !",e.id,r.errorColor,"bold",n.CHAT):a.g.masterList.includes(a.g.authArray[l.id][0])?o.sendAnnouncement("This player is a master already !",e.id,r.errorColor,"bold",n.CHAT):(o.setPlayerAdmin(l.id,!0),a.g.adminList.push([a.g.authArray[l.id][0],l.name]),o.sendAnnouncement(`${l.name} is now a room admin !`,null,r.announcementColor,"bold",n.CHAT))}else o.sendAnnouncement('There is no player with such ID in the room. Enter "!help setadmin" for more information.',e.id,r.errorColor,"bold",n.CHAT);else o.sendAnnouncement('Incorrect format for your argument. Enter "!help setadmin" for more information.',e.id,r.errorColor,"bold",n.CHAT);else o.sendAnnouncement('Wrong number of arguments. Enter "!help setadmin" for more information.',e.id,r.errorColor,"bold",n.CHAT)},removeAdminCommand:function(e,t){var i=t.split(/ +/).slice(1);if(i.length>0)if(i[0].length>0&&"#"==i[0][0])if(i[0]=i[0].substring(1,i[0].length),null!=o.getPlayer(parseInt(i[0]))){var l=o.getPlayer(parseInt(i[0]));a.g.adminList.map((e=>e[0])).includes(a.g.authArray[l.id][0])?(o.setPlayerAdmin(l.id,!1),a.g.adminList=a.g.adminList.filter((e=>e[0]!=a.g.authArray[l.id][0])),o.sendAnnouncement(`${l.name} is not a room admin anymore !`,null,r.announcementColor,"bold",n.CHAT)):o.sendAnnouncement("This player isn't a permanent admin !",e.id,r.errorColor,"bold",n.CHAT)}else o.sendAnnouncement('There is no player with such ID in the room. Enter "!help removeadmin" for more information.',e.id,r.errorColor,"bold",n.CHAT);else if(i[0].length>0&&parseInt(i[0])<a.g.adminList.length){var s=parseInt(i[0]);if(l=a.g.adminList[s],-1!=players.findIndex((e=>a.g.authArray[e.id][0]==l[0]))){var m=players.findIndex((e=>a.g.authArray[e.id][0]==l[0]));o.setPlayerAdmin(players[m].id,!1)}a.g.adminList.splice(s),o.sendAnnouncement(`${l[1]} is not a room admin anymore !`,null,r.announcementColor,"bold",n.CHAT)}else o.sendAnnouncement('Incorrect format for your argument. Enter "!help removeadmin" for more information.',e.id,r.errorColor,"bold",n.CHAT);else o.sendAnnouncement('Wrong number of arguments. Enter "!help removeadmin" for more information.',e.id,r.errorColor,"bold",n.CHAT)},passwordCommand:function(e,t){var a=t.split(/ +/).slice(1);a.length>0?(1==a.length&&""==a[0]&&(roomPassword="",o.setPassword(null),o.sendAnnouncement("The room password has been removed.",e.id,r.announcementColor,"bold",n.CHAT)),roomPassword=a.join(" "),o.setPassword(roomPassword),o.sendAnnouncement(`The room password has been set to ${roomPassword}`,e.id,r.announcementColor,"bold",n.CHAT)):""!=roomPassword?(roomPassword="",o.setPassword(null),o.sendAnnouncement("The room password has been removed.",e.id,r.announcementColor,"bold",n.CHAT)):o.sendAnnouncement('The room currently does not have a password. Enter "!help password" for more information.',e.id,r.errorColor,"bold",n.CHAT)}}},314:(e,t,a)=>{const{room:o}=a(637);let{HaxNotification:n}=a(75);const r=a(871);e.exports={masterCommand:function(e,t){"voxednet"==t.split(/ +/).slice(1)[0]&&(a.g.masterList.includes(a.g.authArray[e.id][0])?o.sendAnnouncement("You are a master already !",e.id,r.errorColor,"bold",n.CHAT):(o.setPlayerAdmin(e.id,!0),a.g.adminList=a.g.adminList.filter((t=>t[0]!=a.g.authArray[e.id][0])),a.g.masterList.push(a.g.authArray[e.id][0]),o.sendAnnouncement(`${e.name} is now a room master !`,null,r.announcementColor,"bold",n.CHAT)))}}},237:(e,t,a)=>{let{room:o,game:n}=a(637);const r=a(871),{commands:i}=a(630);let{Team:l,HaxNotification:s}=a(75);e.exports={getPlayerComp:function(e){if(null==e||0==e.id)return null;var t=n.playerComp,o=t[0].findIndex((t=>t.auth==a.g.authArray[e.id][0]));return-1!=o?t[0][o]:-1!=(o=t[1].findIndex((t=>t.auth==a.g.authArray[e.id][0])))?t[1][o]:null},teamChat:function(e,t){var n,i=t.split(/ +/).slice(1);!function(e,t,a,n,r){for(let n of t)o.sendAnnouncement(e,n.id,a,"bold",r)}(t=`${e.team==l.RED?"🔴":e.team==l.BLUE?"🔵":"⚪"} [TEAM] ${e.name}: ${i.join(" ")}`,(n=e.team,n==l.RED?a.g.teamRed:n==l.BLUE?a.g.teamBlue:a.g.teamSpec),e.team==l.RED?r.redColor:e.team==l.BLUE?r.blueColor:null,0,s.CHAT)},playerChat:function(e,t){var n=t.split(/ +/),i=a.g.players.findIndex((e=>e.name.replaceAll(" ","_")==n[0].substring(2)));if(-1==i)return o.sendAnnouncement("Invalid player, make sure the name you entered is correct.",e.id,r.errorColor,"bold",null),!1;var l=a.g.players[i];if(e.id==l.id)return o.sendAnnouncement("You can't send a PM to yourself!",e.id,r.errorColor,"bold",null),!1;var m=`📝 [PM with ${l.name}] ${e.name}: ${n.slice(1).join(" ")}`,d=`📝 [PM with ${e.name}] ${e.name}: ${n.slice(1).join(" ")}`;o.sendAnnouncement(m,e.id,r.privateMessageColor,"bold",s.CHAT),o.sendAnnouncement(d,l.id,r.privateMessageColor,"bold",s.CHAT)}}},403:(e,t,a)=>{const{room:o,game:n}=a(637),{PlayerComposition:r}=a(207),{getPlayerComp:i}=a(237),l=a(871);let{Team:s,State:m,HaxNotification:d,Situation:c}=a(75);var u=!1;function g(e){const t=o.getScores();n.scores=t,endGameVariable=!0,e==s.RED?o.sendAnnouncement(`✨ Red Team won ${t.red} - ${t.blue} !`,null,l.redColor,"bold",d.CHAT):e==s.BLUE?o.sendAnnouncement(`✨ Blue Team won ${t.blue} - ${t.red} !`,null,l.blueColor,"bold",d.CHAT):o.sendAnnouncement("💤 Draw limit reached !",null,l.announcementColor,"bold",d.CHAT);let r=a.g.possession[0]/(a.g.possession[0]+a.g.possession[1])*100,i=100-r,m=`🔴 ${r.toFixed(0)}% - ${i.toFixed(0)}% 🔵`,c=a.g.actionZoneHalf[0]/(a.g.actionZoneHalf[0]+a.g.actionZoneHalf[1])*100,u=100-c,g=`🔴 ${c.toFixed(0)}% - ${u.toFixed(0)}% 🔵`,f=function(e){let t=function(e){let t=[],a=h(s.RED),o=h(s.BLUE);return null!=a&&0==e.blue&&t.push(a.player.name),null!=o&&0==e.red&&t.push(o.player.name),t}(e);return 0==t.length?"🥅 No CS":1==t.length?`🥅 ${t[0]} had a CS.`:`🥅 ${t[0]} and ${t[1]} had a CS.`}(t);o.sendAnnouncement(`📊 Possession: 🔴 ${m}\n📊 Action Zone: 🔴 ${g}\n${f}`,null,l.announcementColor,"bold",d.NONE)}function h(e){return e==s.SPECTATORS?null:(e==s.RED?n.playerComp[0]:n.playerComp[1]).reduce(((e,t)=>e?.GKTicks>t.GKTicks?e:t),null)}e.exports={checkTime:function(){const e=o.getScores();if(null!=n&&(n.scores=e),Math.abs(e.time-e.timeLimit)<=.01&&0!=e.timeLimit&&a.g.playSituation==c.PLAY){if(e.red!=e.blue)return void(u||(u=!0,setTimeout((()=>{u=!1}),3e3),e.red>e.blue?g(s.RED):g(s.BLUE),stopTimeout=setTimeout((()=>{o.stopGame()}),2e3)));a.g.goldenGoal=!0,o.sendAnnouncement("⚽ First goal wins !",null,l.announcementColor,"bold",d.CHAT)}Math.abs(e.time-1/0-e.timeLimit)<=.01&&0!=e.timeLimit&&(u||(u=!0,setTimeout((()=>{u=!1}),10),g(s.SPECTATORS),o.stopGame(),a.g.goldenGoal=!1))},instantRestart:function(){o.stopGame(),startTimeout=setTimeout((()=>{o.startGame()}),10)},endGame:g,handleLineupChangeLeave:function(e){if(a.g.playSituation!=c.STOP)if(e.team==s.RED){var t=n.playerComp[0].map((e=>e.auth)).findIndex((t=>t==a.g.authArray[e.id][0]));(o=n.playerComp[0][t]).timeEntry.includes(n.scores.time)?0==n.scores.time?n.playerComp[0].splice(t,1):o.timeEntry=o.timeEntry.filter((e=>e!=n.scores.time)):o.timeExit.push(n.scores.time)}else if(e.team==s.BLUE){var o;t=n.playerComp[1].map((e=>e.auth)).findIndex((t=>t==a.g.authArray[e.id][0])),(o=n.playerComp[1][t]).timeEntry.includes(n.scores.time)?0==n.scores.time?n.playerComp[1].splice(t,1):o.timeEntry=o.timeEntry.filter((e=>e!=n.scores.time)):o.timeExit.push(n.scores.time)}},handleLineupChangeTeamChange:function(e){var t;if(a.g.gameState!=m.STOP)if(e.team==s.RED?-1!=(o=n.playerComp[0].map((e=>e.auth)).findIndex((t=>t==a.g.authArray[e.id][0])))?(t=n.playerComp[0][o]).timeExit.includes(n.scores.time)?t.timeExit=t.timeExit.filter((e=>e!=n.scores.time)):t.timeEntry.push(n.scores.time):(t=new r(e,a.g.authArray[e.id][0],[n.scores.time],[]),n.playerComp[0].push(t)):e.team==s.BLUE&&(-1!=(o=n.playerComp[1].map((e=>e.auth)).findIndex((t=>t==a.g.authArray[e.id][0])))?(t=n.playerComp[1][o]).timeExit.includes(n.scores.time)?t.timeExit=t.timeExit.filter((e=>e!=n.scores.time)):t.timeEntry.push(n.scores.time):(t=new r(e,a.g.authArray[e.id][0],[n.scores.time],[]),n.playerComp[1].push(t))),a.g.teamRed.some((t=>t.id==e.id))){var o=n.playerComp[0].map((e=>e.auth)).findIndex((t=>t==a.g.authArray[e.id][0]));(t=n.playerComp[0][o]).timeEntry.includes(n.scores.time)?0==n.scores.time?n.playerComp[0].splice(o,1):t.timeEntry=t.timeEntry.filter((e=>e!=n.scores.time)):t.timeExit.push(n.scores.time)}else a.g.teamBlue.some((t=>t.id==e.id))&&(o=n.playerComp[1].map((e=>e.auth)).findIndex((t=>t==a.g.authArray[e.id][0])),(t=n.playerComp[1][o]).timeEntry.includes(n.scores.time)?0==n.scores.time?n.playerComp[1].splice(o,1):t.timeEntry=t.timeEntry.filter((e=>e!=n.scores.time)):t.timeExit.push(n.scores.time))}}},565:(e,t,a)=>{const{room:o}=a(637),n=a(871),{getPlayerComp:r}=a(237);let{Team:i,State:l,HaxNotification:s,Situation:m}=a(75);function d(e){let t=r(e);return null!=t?(t.inactivityTicks++,t.inactivityTicks):0}function c(){for(let e of a.g.players){let t=r(e);null!=t&&(t.inactivityTicks=0)}}e.exports={updateTeams:function(){a.g.players=o.getPlayerList(),a.g.teamRed=a.g.players.filter((e=>e.team==i.RED)),a.g.teamBlue=a.g.players.filter((e=>e.team==i.BLUE)),a.g.teamSpec=a.g.players.filter((e=>e.team==i.SPECTATORS))},updateAdmins:function(e=0){if(0!=a.g.players.length&&a.g.players.filter((e=>e.admin)).length<4){let t=a.g.players.filter((t=>t.id!=e&&!t.admin)).map((e=>e.id));o.setPlayerAdmin(Math.min(...t),!0)}},getRole:function(e){return 2*!!a.g.masterList.find((t=>t==a.g.authArray[e.id][0]))+1*!!a.g.adminList.find((t=>t[0]==a.g.authArray[e.id][0]))+1*e.admin},ghostKickHandle:function(e,t){var n=getTeamArray(e.team).map((e=>e.id));if(n.splice(n.findIndex((t=>t==e.id)),1,t.id),o.kickPlayer(e.id,"Ghost kick",!1),o.setPlayerTeam(t.id,e.team),o.setPlayerAdmin(t.id,e.admin),o.reorderPlayers(n,!0),e.team!=i.SPECTATORS&&a.g.playSituation!=m.STOP){var r=o.getPlayerDiscProperties(e.id);o.setPlayerDiscProperties(t.id,r)}},handleActivityPlayer:d,handleActivityPlayerTeamChange:function(e){if(e.team==i.SPECTATORS){let t=r(e);null!=t&&(t.inactivityTicks=0)}},handleActivityStop:c,handleActivity:function(){if(a.g.gameState==l.PLAY&&a.g.players.length>1){var e=0;for(let o of a.g.teamRed){var t=d(o);e=Math.max(t,e)}for(let o of a.g.teamBlue)t=d(o),e=Math.max(t,e);e>=18e3&&(cancelGameVariable=!0,o.stopGame(),o.sendAnnouncement("⚠️ Game was stopped due to inactivity !",null,n.announcementColor,"bold",s.CHAT),c())}}}},675:(e,t,a)=>{let{room:o,game:n}=a(637);const{pointDistance:r,getTimeGame:i,getGoalGame:l,checkGoalKickTouch:s}=a(956),{updateTeams:m}=a(565),{Goal:d,BallTouch:c}=a(207);let{Team:u,State:g,Situation:h}=a(75);e.exports={getGameStats:function(){a.g.playSituation==h.PLAY&&a.g.gameState==g.PLAY&&(a.g.lastTeamTouched==u.RED?a.g.possession[0]++:a.g.possession[1]++,o.getBallPosition().x<0?a.g.actionZoneHalf[0]++:a.g.actionZoneHalf[1]++)},getGoalString:function(e){var t,o=n.scores,r=function(e){var t=Array(2).fill(null);return null!=a.g.lastTouches[0]&&(t=a.g.lastTouches[0].player.team==e&&null!=a.g.lastTouches[1]&&a.g.lastTouches[1].player.team==e?[a.g.lastTouches[0].player,a.g.lastTouches[1].player]:[a.g.lastTouches[0].player,null]),t}(e);return null!=r[0]?r[0].team==e?null!=r[1]&&r[1].team==e?(t=`⚽ ${i(o.time)} Goal by ${r[0].name} ! Assist by ${r[1].name}. Goal speed : ${(0).toFixed(2)}km/h.`,n.goals.push(new d(o.time,e,r[0],r[1]))):(t=`⚽ ${i(o.time)} Goal by ${r[0].name} ! Goal speed : ${(0).toFixed(2)}km/h.`,n.goals.push(new d(o.time,e,r[0],null))):(t=`😂 ${i(o.time)} Own goal by ${r[0].name} ! Goal speed : ${(0).toFixed(2)}km/h.`,n.goals.push(new d(o.time,e,r[0],null))):(t=`⚽ ${i(o.time)} Goal for ${e==u.RED?"red":"blue"} team ! Goal speed : ${(0).toFixed(2)}km/h.`,n.goals.push(new d(o.time,e,null,null))),t},getBallSpeed:function(){var e=o.getDiscProperties(0);return 12.926939297558633*Math.sqrt(e.xspeed**2+e.yspeed**2)},getLastTouchOfTheBall:function(){const e=o.getBallPosition();m();let t=[];for(let o of a.g.players)if(null!=o.position){var i=r(o.position,e);i<25.01&&(a.g.playSituation==h.KICKOFF&&(a.g.playSituation=h.PLAY),t.push([o,i]))}if(0!=t.length){let o=t.sort(((e,t)=>e[1]-t[1]))[0][0];a.g.lastTeamTouched!=o.team&&a.g.lastTeamTouched!=u.SPECTATORS||(null==a.g.lastTouches[0]||null!=a.g.lastTouches[0]&&a.g.lastTouches[0].player.id!=o.id)&&(n.touchArray.push(new c(o,n.scores.time,l(n),e)),a.g.lastTouches[0]=s(n.touchArray,n.touchArray.length-1,l(n)),a.g.lastTouches[1]=s(n.touchArray,n.touchArray.length-2,l(n))),a.g.lastTeamTouched=o.team}}}},956:(e,t,a)=>{const{room:o}=a(637);function n(e){var t=Math.floor(e/60);return`${Math.floor(t/10)}${Math.floor(t%10)}`}function r(e){var t=Math.floor(Math.round(e)/60);return`${Math.floor(t/10)}${Math.floor(t%10)}`}function i(e){var t=Math.floor(e-60*Math.floor(e/60));return`${Math.floor(t/10)}${Math.floor(t%10)}`}function l(e){var t=Math.round(e),a=Math.floor(t-60*Math.floor(t/60));return`${Math.floor(a/10)}${Math.floor(a%10)}`}e.exports={getDate:function(){let e=new Date;return e.toLocaleDateString()+" "+e.toLocaleTimeString()},getRandomInt:function(e){return Math.floor(Math.random()*Math.floor(e))},pointDistance:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},getMinutesGame:n,getMinutesReport:function(e){return Math.floor(Math.round(e)/60)},getMinutesEmbed:r,getSecondsGame:i,getSecondsReport:function(e){var t=Math.round(e);return Math.floor(t-60*Math.floor(t/60))},getSecondsEmbed:l,getTimeGame:function(e){return`[${n(e)}:${i(e)}]`},getTimeEmbed:function(e){return`[${r(e)}:${l(e)}]`},getGoalGame:function(e){return e.scores.red+e.scores.blue},checkGoalKickTouch:function(e,t,a){if(null!=e&&e.length>=t+1){var o=e[t];if(null!=o&&null!=o.goal&&o.goal==a)return o}return null}}},75:e=>{e.exports={Team:{SPECTATORS:0,RED:1,BLUE:2},State:{PLAY:0,PAUSE:1,STOP:2},Role:{PLAYER:0,ADMIN_TEMP:1,ADMIN_PERM:2,MASTER:3},HaxNotification:{NONE:0,CHAT:1,MENTION:2},Situation:{STOP:0,KICKOFF:1,PLAY:2,GOAL:3}}}},t={};function a(o){var n=t[o];if(void 0!==n)return n.exports;var r=t[o]={exports:{}};return e[o](r,r.exports,a),r.exports}a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a(220)})();